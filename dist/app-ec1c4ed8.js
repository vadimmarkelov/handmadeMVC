!function(e){e.registerHelper("plus1",function(e){return e+1}),e.registerHelper("IfEqual",function(e,t,i){return e===t?i.fn(this):i.inverse(this)}),e.registerHelper("IfUndefined",function(e,t){return"undefined"==typeof e?t.fn(this):t.inverse(this)}),e.registerHelper("times",function(e,t){for(var i="",s=0;e>s;++s)i+=t.fn(s);return i})}(Handlebars),function(){var e=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},t=function(){};t.prototype={subscribe:function(e){this._handlers||(this._handlers=[]),this._handlers.push(e)},unsubscribe:function(e){this._handlers||(this._handlers=[]);for(var t=0,i=this._handlers.length;i>t;t++)if(this._handlers[t]===e)return this._handlers.splice(t,1),!0;return!1},notify:function(e,t){this._handlers||(this._handlers=[]);for(var i=Array.prototype.slice.call(arguments,2),s=0,u=this._handlers.length;u>s;s++)this._handlers[s][e]&&this._handlers[s][e].apply(t,i);this.parent&&this.parent.notify(e,this.parent)}};var i=function(e){this.create(e)};e(i,t),i.prototype.get=function(e){return this[e]},i.prototype.set=function(e,t){var i=t!==this[e];this[e]=t,i&&this.notify("update",this)},i.prototype.create=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.notify("create",this)},i.prototype.remove=function(){this.notify("remove",this)},window.OOP={Observable:t,Model:i,extendObj:e}}();var roomData=[{name:"Basic 2 Bed",occupancy:2,price:88.99,count:0,maxCount:5},{name:"Basic Family Room",occupancy:4,price:98.99,count:0,maxCount:5},{name:"Deluxe 2 Bed",occupancy:2,price:109.99,count:0,maxCount:5},{name:"Deluxe Family Room",occupancy:7,price:112.99,count:0,maxCount:5},{name:"Bridal Suite",occupancy:2,price:167.99,count:0,maxCount:5},{name:"President Suite",occupancy:2,price:301.99,count:0,maxCount:5},{name:"One+One",occupancy:2,price:78.99,count:0,maxCount:5},{name:"Single Room",occupancy:1,price:28.99,count:0,maxCount:5},{name:"Queen Room",occupancy:2,price:99.99,count:0,maxCount:5},{name:"Basement 1 Bed",occupancy:2,price:9.99,count:0,maxCount:5},{name:"Mega XL Suite",occupancy:9,price:412.99,count:0,maxCount:5}];!function(e){var t=function(e,t,i,s,u,a){this.create({parent:a,name:e,occupancy:t,price:i,count:s,maxCount:u})};e.extendObj(t,e.Model);var i=function(e){this.items=[],this.create({count:e.length,totalRooms:0,totalPeople:0,totalPrice:0,orderField:void 0,orderDirection:void 0}),this.subscribe({update:function(){this.set("count",this.items.length),this.set("totalPrice",this.items.reduce(function(e,t){return e+t.get("price")*t.get("count")},0)),this.set("totalPeople",this.items.reduce(function(e,t){return e+t.get("occupancy")*t.get("count")},0)),this.set("totalRooms",this.items.reduce(function(e,t){return e+t.get("count")},0))}});for(var t in e)this.add(e[t])};e.extendObj(i,e.Model),i.prototype.add=function(e){this.items.push(new t(e.name,e.occupancy,e.price,e.count,e.maxCount,this)),this.notify("update",this)},i.prototype.remove=function(e){this.items[e].remove(),this.items.splice(e,1),this.notify("update",this)},i.prototype.getByIndex=function(e){return this.items[e]},i.prototype.orderBy=function(e,t){this.items.sort(function(i,s){var u=0;return i[e]<s[e]&&(u=-1),i[e]>s[e]&&(u=1),u*(t?1:-1)}),this.notify("update",this)},window.RoomList=i}(OOP),function(e){var t=function(t,i){this.target=t,this.template=e.compile(i)};t.prototype={render:function(e){var t={rooms:e.get("items"),totalRooms:e.get("totalRooms"),totalPeople:e.get("totalPeople"),totalPrice:e.get("totalPrice").toFixed(2),orderField:e.get("orderField"),orderDirection:e.get("orderDirection")};this.target.html(this.template(t))}},window.RoomView=t}(Handlebars),function(e){function t(t,i){t.subscribe({update:function(){i.render(t)}}),e(i.target).delegate("select","change",function(){t.getByIndex(e(this).data("index")).set("count",parseInt(e(this).val()))}),e(i.target).delegate(".sortable","click",function(){t.set("orderField",e(this).data("sortableBy")),t.set("orderDirection",!t.get("orderDirection")),t.orderBy(t.get("orderField"),t.get("orderDirection"))}),e(i.target).delegate("form","submit",function(){return window.alert("Please visit some real website for accomodation booking ;)"),!1}),i.render(t)}window.RoomController=t}(jQuery);var reviewData=[{score:5,text:"Pellentesque ligula nibh, lacinia eget pharetra ut, vulputate vitae odio. Donec non mattis nisi. Pellentesque elit leo, tincidunt nec felis vitae, aliquet imperdiet purus. In elit ante, vestibulum non accumsan at, volutpat eget dolor. Quisque ut tincidunt elit. Curabitur rutrum dignissim enim ac aliquet. Curabitur et aliquam nisl.",user:"Malcolm Reynolds"},{score:8,text:"Duis ac nisi id lorem rhoncus tempus eu sit amet nisi. Aenean ultrices congue ligula, ac molestie velit ultricies a. Nulla ac nunc et nisi placerat interdum sit amet ut erat. Integer vulputate nulla id orci cursus, eget ullamcorper justo ultricies. Nulla lorem dui, euismod non porttitor eu, sagittis in lacus. In suscipit lectus non viverra luctus. Pellentesque egestas, dolor at luctus eleifend, velit dui viverra risus, ac rutrum sapien ante at massa. Donec imperdiet consequat laoreet.",user:"Zoe Washburne"},{score:3,text:"Etiam posuere, magna sit amet ullamcorper auctor, odio urna tempor velit, sit amet tincidunt lorem diam a velit. Integer a dapibus nunc. In iaculis vel sem ut gravida.",user:"Hoban Washburne"},{score:10,text:"Etiam condimentum sodales dui in vestibulum. Vivamus euismod egestas porttitor. Proin dictum tempor euismod. Suspendisse elit nulla, elementum eu ornare in, tempus in massa. Proin elit sem, posuere nec tempor eget, suscipit sit amet dui. Aliquam in vehicula lorem. Praesent vitae vestibulum ante, nec vestibulum metus. Morbi commodo diam in leo semper ornare. Phasellus et diam magna.",user:"Inara Serra"},{score:9,text:"Maecenas cursus ut erat vitae vestibulum. Fusce feugiat dignissim augue consequat condimentum. Donec risus felis, ultricies a velit sed, varius ullamcorper enim. Suspendisse ultrices non tortor non lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit.",user:"Jayne Cobb"},{score:4,text:"Donec adipiscing lacus sed neque cursus ullamcorper. Vestibulum tellus lectus, molestie vitae augue et, egestas convallis mi. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec porttitor mi vitae mauris aliquam, non accumsan odio tincidunt. Aliquam semper enim quam, ac cursus lectus dignissim vitae. Suspendisse nec rutrum ligula.",user:"Kaylee Frye"},{score:7,text:"Nullam et leo placerat lectus fringilla varius vel a lorem. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla nibh eros, blandit at aliquam eu, ullamcorper eu diam. Etiam id viverra lacus, rutrum suscipit nulla. Maecenas adipiscing, mi sit amet iaculis congue, urna massa vestibulum tortor, a tempus nibh tortor id dui.",user:"Simon Tam"},{score:2,text:"Maecenas semper, orci eget cursus aliquam, orci tellus sodales urna, nec varius nisi arcu gravida velit. Proin ultrices egestas nunc, eget dapibus erat sollicitudin in. Fusce fermentum dignissim ipsum sollicitudin tincidunt. Aliquam erat volutpat. Suspendisse in ornare ante.",user:"River Tam"},{score:10,text:"Nullam purus ante, rhoncus ac malesuada at, bibendum nec urna. Cras lobortis viverra feugiat. Praesent sapien elit, sagittis vel orci sed, congue consequat nulla.",user:"Derrial Book"},{score:9,text:"Donec malesuada semper lectus sed sagittis. Sed laoreet consectetur tortor, ac tempus ipsum malesuada non. Aenean dapibus leo sed sapien rhoncus, at dapibus ligula porta. Morbi tincidunt, urna eget ullamcorper aliquam, augue lectus placerat orci, tristique aliquet ipsum nisi id orci. Nulla vulputate lectus justo, eu dapibus lectus sodales ac. Donec volutpat nibh mi. Proin eu justo vitae dolor accumsan ultrices vel non ante.",user:"Sheriff Bourne"},{score:3,text:"Sed consectetur, lorem vitae laoreet tempus, neque elit fringilla nisl, nec tempus urna quam eu nulla. Nunc tempor nec magna vel viverra. In dapibus aliquam velit, ut malesuada nibh ornare eget. Suspendisse in risus posuere, hendrerit odio id, tincidunt lacus. Nunc fermentum metus sit amet mauris pellentesque, vitae sollicitudin dui facilisis. Etiam at velit id dolor rhoncus porttitor. Vestibulum quis blandit felis.",user:"Lawrence Dobson"},{score:7,text:"Suspendisse in risus posuere, hendrerit odio id, tincidunt lacus. Nunc fermentum metus sit amet mauris pellentesque, vitae sollicitudin dui facilisis. Etiam at velit id dolor rhoncus porttitor. Vestibulum quis blandit felis.",user:"Jubal Early"},{score:8,text:"Phasellus venenatis tortor ac lectus dapibus, sit amet pellentesque turpis mollis. Nam laoreet magna non leo facilisis auctor. Fusce neque augue, lobortis eget orci vel, lobortis porta lectus. Fusce venenatis, metus quis accumsan auctor, ipsum lectus volutpat tellus, viverra vulputate risus dolor porta lacus",user:"Fanty and Mingo"},{score:1,text:"Sed molestie ipsum ac diam feugiat tempus. Donec sed mi tortor. Donec dolor augue, tincidunt sed dignissim ac, congue ac sapien. Morbi molestie nibh eget neque rutrum tincidunt. Quisque adipiscing pulvinar massa eu laoreet. Aenean ipsum nisl, convallis eget tortor nec, convallis consequat tellus.",user:"Stitch Hessian"},{score:10,text:"Etiam porttitor ut massa sit amet pellentesque. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Curabitur facilisis commodo nulla ut laoreet. Integer vel felis sit amet dolor sollicitudin gravida. Nam quis congue lorem. Aenean quis purus leo. Nunc iaculis enim odio, eu feugiat augue porta sit amet. Fusce quis commodo nisl. Nunc laoreet leo vel egestas volutpat. Suspendisse et cursus leo.",user:"Fess Higgins"},{score:9,text:"Nunc vel suscipit mi. Morbi semper diam urna, sit amet elementum turpis egestas nec. Interdum et malesuada fames ac ante ipsum primis in faucibus. Integer aliquet mi at dui blandit accumsan. Aliquam laoreet enim vel volutpat fermentum. Etiam feugiat arcu mi, sed blandit magna dictum vitae. Ut tristique id nunc ut molestie. Curabitur et augue rhoncus, consectetur mauris vel, laoreet sapien.",user:"Magistrate Higgins"},{score:6,text:"Mauris in ligula quis orci auctor blandit. Maecenas venenatis quis mi vitae sagittis. Sed tincidunt laoreet mi nec ullamcorper. Pellentesque elementum ut lacus ac iaculis. Sed suscipit ipsum ut bibendum ullamcorper. Cras ac est risus. Praesent in risus velit. Donec placerat hendrerit nibh vitae auctor.",user:"Dr. Mathias"},{score:8,text:"Sed ut ipsum in tellus tristique venenatis quis sit amet nibh. Phasellus pretium eget est ac consequat. Vivamus accumsan semper dui, nec vestibulum mauris rutrum sollicitudin. Mauris quis lorem fermentum, dignissim eros faucibus, tempor justo. Donec nec interdum risus.",user:"Adelei Niska"},{score:9,text:"Sed felis erat, laoreet vitae tincidunt non, interdum et elit. Nunc sit amet malesuada lorem. Suspendisse sagittis nulla quis elit pulvinar accumsan. Sed massa nibh, consequat ut mi in, consectetur pharetra nisl. Proin adipiscing semper quam, eget vestibulum risus pharetra ut. Ut sed elit neque.",user:"Tracey Smith"},{score:4,text:"Nam sit amet elit in nibh faucibus bibendum sed quis metus. Vivamus aliquam orci sed porta rhoncus. Mauris aliquam purus ut gravida gravida. Mauris sit amet quam enim. Aenean fringilla sed ligula luctus adipiscing. Donec ac augue tortor. In ultricies luctus nulla.",user:"Atherton Wing"},{score:3,text:"Mauris id adipiscing justo, eget volutpat mauris. Sed lorem ligula, fermentum at interdum eu, pulvinar vel felis. Aliquam malesuada eros augue, at sollicitudin urna accumsan ultrices.",user:"Monty"},{score:6,text:"Sed urna est, sagittis eu ligula sit amet, pellentesque lacinia velit. Sed imperdiet enim non risus bibendum semper. Curabitur gravida consequat magna, nec lobortis elit pretium nec. Morbi eget lacus eget ipsum vehicula pharetra. Donec vehicula aliquam euismod. Nulla facilisi. Donec non est nec eros volutpat placerat in et massa.",user:"Lenore"},{score:2,text:"Aliquam scelerisque ullamcorper vehicula. Aenean ut aliquam mi, nec faucibus tortor. Aliquam erat volutpat. Pellentesque et pellentesque mi. Aenean sem neque, cursus lacinia lectus in, egestas aliquet lorem. Sed aliquam, dolor in hendrerit fringilla, dui arcu pulvinar orci, non suscipit urna nibh id odio.",user:"Mr. Universe"},{score:8,text:"Morbi vel nisi vel nibh rhoncus vestibulum non sagittis nisl. Curabitur varius dolor massa, ut pulvinar mauris blandit a. Phasellus vestibulum arcu turpis, ut consequat risus sagittis ut. Proin non elit sit amet magna lacinia molestie. Sed eget vulputate augue. In hac habitasse platea dictumst. Cras imperdiet leo nec ante dapibus, in mollis risus interdum. Nullam pharetra nibh eu diam tempus, eget lobortis metus vulputate.",user:"Sir Warwick Harrow"},{score:9,text:"Curabitur quis augue cursus, cursus massa ac, dapibus magna. Curabitur non sapien vel lorem pellentesque rhoncus. Nam sagittis, metus aliquet malesuada egestas, leo purus cursus turpis, tempor pharetra tellus nibh posuere turpis. Cras viverra, nisi eget ornare suscipit, erat velit facilisis elit, quis interdum justo magna a tortor. Donec condimentum quam id felis sollicitudin porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus.",user:"Simon Tam"},{score:10,text:"Quisque eros sapien, tempus vel ullamcorper nec, faucibus eget ante. Curabitur vel velit ac libero tempus fringilla in dignissim ligula. Integer eget laoreet ligula, eget ultricies ligula. Donec convallis augue a dolor sagittis feugiat. Aliquam adipiscing, ipsum eget pulvinar pulvinar, elit nisl vestibulum ligula, id interdum felis sem quis mi. Sed vel leo nisl. Sed consequat pharetra diam, vitae ultrices augue varius ac.",user:"Dr. Caron"},{score:8,text:"Etiam elementum at est sit amet sagittis. Curabitur euismod tellus leo, vitae porta justo ultricies vitae. Aliquam posuere nunc sit amet mauris interdum lacinia",user:"Bridget"},{score:7,text:"Uspendisse mollis leo et nisl laoreet, a molestie justo consectetur. Aliquam et leo vulputate, tincidunt massa vel, volutpat leo. Suspendisse potenti.",user:"Bester"},{score:8,text:"non convallis enim porttitor. Nulla ut fermentum sem. Aliquam tincidunt, dui malesuada venenatis pulvinar, justo tellus tempus nulla, sit amet pretium orci metus sed purus. Phasellus lobortis cursus lacus vitae volutpat. Nulla at velit ut orci varius placerat. Aenean est elit, adipiscing et nunc varius, accumsan tempus magna. Donec consectetur orci nec mattis hendrerit.",user:"Badger"}];!function(e){var t=function(e,t,i,s){this.create({parent:s,score:e,text:t,user:i})};e.extendObj(t,e.Model);var i=function(e){this.items=[];for(var t in e)this.add(e[t]);this.create({count:e.length,itemsOnPage:5,page:0}),this.subscribe({update:function(){this.set("count",this.items.length)}})};e.extendObj(i,e.Model),i.prototype.add=function(e){this.items.push(new t(e.score,e.text,e.user,this)),this.notify("update",this)},i.prototype.remove=function(e){this.items[e].remove(),this.items.splice(e,1),this.notify("update",this)},i.prototype.orderBy=function(e,t){this.items.sort(function(i,s){var u=0;return i[e]<s[e]&&(u=-1),i[e]>s[e]&&(u=1),u*(t?1:-1)}),this.notify("update",this)},i.prototype.getPageItems=function(){var e=this.page;return this.items.slice(e*this.itemsOnPage,(e+1)*this.itemsOnPage)},i.prototype.getPageCount=function(){return Math.ceil(this.items.length/this.itemsOnPage)},window.ReviewList=i}(OOP),function(e){var t=function(t,i){this.target=t,this.template=e.compile(i)};t.prototype={render:function(e){var t={items:e.getPageItems(),currentPage:e.get("page"),pageRef:new Array(e.getPageCount()),order:e.get("orderDirection")};this.target.html(this.template(t))}},window.ReviewView=t}(Handlebars),function(e){function t(t,i){t.subscribe({update:function(){i.render(t)}}),e(i.target).delegate("li","click",function(){t.set("page",e(this).data("pageIndex"))}),e(i.target).delegate("h2","click",function(){t.set("orderDirection",!t.get("orderDirection")),t.orderBy("score",t.get("orderDirection"))}),i.render(t)}window.ReviewController=t}(jQuery),$(function(){{var e=new ReviewList(reviewData),t=new ReviewView($(".reviews"),$("#reviewsTemplate").html()),i=(new ReviewController(e,t),new RoomList(roomData)),s=new RoomView($(".rooms"),$("#roomsTemplate").html());new RoomController(i,s)}});